<script>
    // Listen for the extension telling us a row was finished
    window.addEventListener("message", (event) => {
        if (event.data.type === "ROW_COMPLETED") {
            removeTopRow();
        }
    });

    function removeTopRow() {
        const table = document.querySelector("table");
        if (table && table.rows.length > 1) {
            table.deleteRow(1); // Delete the first data row
            updateJSON(); // Refresh the code block
        }
    }

    function updateJSON() {
        const table = document.querySelector("table");
        const rows = [];
        for (let i = 1; i < table.rows.length; i++) {
            rows.push([table.rows[i].cells[1].innerText, table.rows[i].cells[2].innerText]);
        }
        document.getElementById('jsonDisplay').innerText = JSON.stringify(rows);
    }
    // ... keep processBridge function ...
</script>
